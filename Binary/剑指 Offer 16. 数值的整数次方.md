#### [å‰‘æŒ‡ Offer 16. æ•°å€¼çš„æ•´æ•°æ¬¡æ–¹](https://leetcode-cn.com/problems/shu-zhi-de-zheng-shu-ci-fang-lcof/)



**Description**

å®ç° [pow(*x*, *n*)](https://www.cplusplus.com/reference/valarray/pow/) ï¼Œå³è®¡ç®— x çš„ n æ¬¡å¹‚å‡½æ•°ï¼ˆå³ï¼Œxnï¼‰ã€‚ä¸å¾—ä½¿ç”¨åº“å‡½æ•°ï¼ŒåŒæ—¶ä¸éœ€è¦è€ƒè™‘å¤§æ•°é—®é¢˜ã€‚

zjd: è¿™è¿˜mediumå—ï¼ŸğŸ˜­



**Example**

```Cpp
ç¤ºä¾‹ 1ï¼š

è¾“å…¥ï¼šx = 2.00000, n = 10
è¾“å‡ºï¼š1024.00000
ç¤ºä¾‹ 2ï¼š

è¾“å…¥ï¼šx = 2.10000, n = 3
è¾“å‡ºï¼š9.26100
ç¤ºä¾‹ 3ï¼š

è¾“å…¥ï¼šx = 2.00000, n = -2
è¾“å‡ºï¼š0.25000
è§£é‡Šï¼š2-2 = 1/22 = 1/4 = 0.25


æç¤ºï¼š

-100.0 < x < 100.0
-231 <= n <= 231-1
-104 <= xn <= 104
```



**äºŒåˆ†æ³•å®ç°å¿«é€Ÿå¹‚**

3^10=3*3*3*3*3*3*3*3*3*3

//å°½é‡æƒ³åŠæ³•æŠŠæŒ‡æ•°å˜å°æ¥ï¼Œè¿™é‡Œçš„æŒ‡æ•°ä¸º10

3^10=(3*3)*(3*3)*(3*3)*(3*3)*(3*3)

3^10=(3*3)^5

3^10=9^5

//æ­¤æ—¶æŒ‡æ•°ç”±10ç¼©å‡ä¸€åŠå˜æˆäº†5ï¼Œè€Œåº•æ•°å˜æˆäº†åŸæ¥çš„å¹³æ–¹ï¼Œæ±‚3^10åŸæœ¬éœ€è¦æ‰§è¡Œ10æ¬¡å¾ªç¯æ“ä½œï¼Œæ±‚9^5å´åªéœ€è¦æ‰§è¡Œ5æ¬¡å¾ªç¯æ“ä½œï¼Œä½†æ˜¯3^10å´ç­‰äº9^5,æˆ‘ä»¬ç”¨ä¸€æ¬¡ï¼ˆåº•æ•°åšå¹³æ–¹æ“ä½œï¼‰çš„æ“ä½œå‡å°‘äº†åŸæœ¬ä¸€åŠçš„å¾ªç¯é‡ï¼Œç‰¹åˆ«æ˜¯åœ¨å¹‚ç‰¹åˆ«å¤§çš„æ—¶å€™æ•ˆæœéå¸¸å¥½ï¼Œä¾‹å¦‚2^10000=4^5000,åº•æ•°åªæ˜¯åšäº†ä¸€ä¸ªå°å°çš„å¹³æ–¹æ“ä½œï¼Œè€ŒæŒ‡æ•°å°±ä»10000å˜æˆäº†5000ï¼Œå‡å°‘äº†5000æ¬¡çš„å¾ªç¯æ“ä½œã€‚

//ç°åœ¨æˆ‘ä»¬çš„é—®é¢˜æ˜¯å¦‚ä½•æŠŠæŒ‡æ•°5å˜æˆåŸæ¥çš„ä¸€åŠï¼Œ5æ˜¯ä¸€ä¸ªå¥‡æ•°ï¼Œ5çš„ä¸€åŠæ˜¯2.5ï¼Œä½†æ˜¯æˆ‘ä»¬çŸ¥é“ï¼ŒæŒ‡æ•°ä¸èƒ½ä¸ºå°æ•°ï¼Œå› æ­¤æˆ‘ä»¬ä¸èƒ½è¿™ä¹ˆç®€å•ç²—æš´çš„ç›´æ¥æ‰§è¡Œ5/2ï¼Œç„¶è€Œï¼Œè¿™é‡Œè¿˜æœ‰å¦ä¸€ç§æ–¹æ³•èƒ½è¡¨ç¤º9^5

9^5=ï¼ˆ9^4ï¼‰*ï¼ˆ9^1ï¼‰

//æ­¤æ—¶æˆ‘ä»¬æŠ½å‡ºäº†ä¸€ä¸ªåº•æ•°çš„ä¸€æ¬¡æ–¹ï¼Œè¿™é‡Œå³ä¸º9^1ï¼Œè¿™ä¸ª9^1æˆ‘ä»¬å…ˆå•ç‹¬ç§»å‡ºæ¥,å‰©ä¸‹çš„9^4åˆèƒ½å¤Ÿåœ¨æ‰§è¡Œâ€œç¼©æŒ‡æ•°â€æ“ä½œäº†ï¼ŒæŠŠæŒ‡æ•°ç¼©å°ä¸€åŠï¼Œåº•æ•°æ‰§è¡Œå¹³æ–¹æ“ä½œ

9^5=ï¼ˆ81^2ï¼‰*(9^1)

//æŠŠæŒ‡æ•°ç¼©å°ä¸€åŠï¼Œåº•æ•°æ‰§è¡Œå¹³æ–¹æ“ä½œ

9^5=ï¼ˆ6561^1ï¼‰*(9^1)

//æ­¤æ—¶ï¼Œæˆ‘ä»¬å‘ç°æŒ‡æ•°åˆå˜æˆäº†ä¸€ä¸ªå¥‡æ•°1ï¼ŒæŒ‰ç…§ä¸Šé¢å¯¹æŒ‡æ•°ä¸ºå¥‡æ•°çš„æ“ä½œæ–¹æ³•ï¼Œåº”è¯¥æŠ½å‡ºäº†ä¸€ä¸ªåº•æ•°çš„ä¸€æ¬¡æ–¹ï¼Œè¿™é‡Œå³ä¸º6561^1ï¼Œè¿™ä¸ª6561^1æˆ‘ä»¬å…ˆå•ç‹¬ç§»å‡ºæ¥ï¼Œä½†æ˜¯æ­¤æ—¶æŒ‡æ•°å´å˜æˆäº†0ï¼Œä¹Ÿå°±æ„å‘³ç€æˆ‘ä»¬æ— æ³•å†è¿›è¡Œâ€œç¼©æŒ‡æ•°â€æ“ä½œäº†ã€‚

9^5=ï¼ˆ6561^0ï¼‰*(9^1)*(6561^1)=1*(9^1)*(6561^1)=(9^1)*(6561^1)=9*6561=59049

æˆ‘ä»¬èƒ½å¤Ÿå‘ç°ï¼Œæœ€åçš„ç»“æœæ˜¯9*6561ï¼Œè€Œ9æ˜¯æ€ä¹ˆäº§ç”Ÿçš„ï¼Ÿæ˜¯ä¸æ˜¯å½“æŒ‡æ•°ä¸ºå¥‡æ•°5æ—¶ï¼Œæ­¤æ—¶åº•æ•°ä¸º9ã€‚é‚£6561åˆæ˜¯æ€ä¹ˆäº§ç”Ÿçš„å‘¢ï¼Ÿæ˜¯ä¸æ˜¯å½“æŒ‡æ•°ä¸ºå¥‡æ•°1æ—¶ï¼Œæ­¤æ—¶çš„åº•æ•°ä¸º6561ã€‚æ‰€ä»¥æˆ‘ä»¬èƒ½å‘ç°ä¸€ä¸ªè§„å¾‹ï¼šæœ€åæ±‚å‡ºçš„å¹‚ç»“æœå®é™…ä¸Šå°±æ˜¯åœ¨å˜åŒ–è¿‡ç¨‹ä¸­æ‰€æœ‰å½“æŒ‡æ•°ä¸ºå¥‡æ•°æ—¶åº•æ•°çš„ä¹˜ç§¯ã€‚


**Solution**

1. å¹‚ä¸ºå¶æ•°æ—¶ï¼Œç›´æ¥num>>1; x<<1;
2. å¹‚ä¸ºåŸºæ•°æ—¶ï¼Œnum--, res *= x, x<<1, num>>1;



**Code**

```cpp
class Solution {
public:
    double myPow(double x, int n) {
        if(n == 0) return 1;
        if(n == 1) return x;
        if(x == 0) return 0;//é˜²æ­¢1/0
        long num = n;
        if(num < 0 ){
            x = 1/x;
            num = -num;
        }

        double res = 1;
        while(num){
            if(num%2 == 0){//æŒ‡æ•°ä¸ºå¶æ•°
                x *= x;
                num /= 2;
            } else{
                res *= x;
                --num;
                x *= x;
                num /= 2;
            }
        }
        return res;
    }
};
```



